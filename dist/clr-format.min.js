"use strict";var Format,__extends;!function(t){var r;!function(t){var r;!function(t){function r(t){if("function"!=typeof t)throw new TypeError("Cannot call method 'getName' on non-functional objects");var r=o.exec(t.toString());return r&&r[1]?r[1]:"anonymous"}function n(){return e}var o,e;t.getName=r,o=/function +(\w+)/,t.getEmpty=n,e=function(){return void 0}}(r=t.Function||(t.Function={}))}(r=t.Utils||(t.Utils={}))}(Format||(Format={})),__extends=this&&this.__extends||function(t,r){function n(){this.constructor=t}for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);n.prototype=r.prototype,t.prototype=new n},function(t){var r;!function(r){t.Errors.ErrorClass=Error;var n=function(r){function n(n,o){r.call(this,n),this.message=n,this.innerError=o,this.name=t.Utils.Function.getName(this.constructor),this.stack=this.getStack(o),this.source=this.getActualSource(this.stack)}return __extends(n,r),n.prototype.incrementStackCount=function(){this.childStackCount=(this.childStackCount||0)+1},n.prototype.getStack=function(t){return t?t.stack:this.stack||this.getActualStack()},n.prototype.getActualSource=function(t){if(t){var r=t.split("\n");return r[this.getStackOmitStart(r)].trim()}},n.prototype.getActualStack=function(){var t,r=this.getNativeStack();return r?(t=r.split("\n"),t.splice(this.getStackOmitStart(t),this.getStackOmitCount()),t.join("\n")):void 0},n.prototype.getNativeStack=function(){try{throw new Error}catch(t){return t.stack}},n.prototype.getStackOmitStart=function(t){return"Error"===t[0]?1:0},n.prototype.getStackOmitCount=function(){var t=4;return this.childStackCount?t+this.childStackCount:t},n}(r.ErrorClass);r.SystemError=n}(r=t.Errors||(t.Errors={}))}(Format||(Format={})),function(t){var r;!function(t){var r=function(t){function r(r,n){t.prototype.incrementStackCount.call(this),t.call(this,r,n)}return __extends(r,t),r}(t.SystemError);t.ArgumentError=r}(r=t.Errors||(t.Errors={}))}(Format||(Format={})),function(t){var r;!function(t){function r(t){return Object.prototype.toString.call(t)}function n(t,n){return r(n)===String.format("[object {0}]",t)}function o(t){return"[object Object]"===r(t)}t.getType=r,t.isType=n,t.isObject=o}(r=t.Utils||(t.Utils={}))}(Format||(Format={})),function(t){var r;!function(t){var r=function(t){function r(r){t.prototype.incrementStackCount.call(this),t.call(this,String.format("Argument '{0}' cannot be undefined or null",r))}return __extends(r,t),r}(t.ArgumentError);t.ArgumentNullError=r}(r=t.Errors||(t.Errors={}))}(Format||(Format={})),function(t){var r;!function(r){var n;!function(r){function n(r,n){if(null==r)throw new t.Errors.ArgumentNullError("value");return e(n),i(n),u(r,n)&&(r=s[n.direction](r,n)),r}var o,e,i,a,u,c,f,s;!function(t){t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Both=3]="Both"}(r.Direction||(r.Direction={})),o=r.Direction,r.pad=n,e=function(t){t.direction=t.direction||o.Right,t.paddingChar=t.paddingChar||" "},i=function(r){if(!a(r.totalWidth))throw new t.Errors.ArgumentError(String.format("Option 'totalWidth' with value '{0}' must be a positive non-zero integer value",r.totalWidth+""));if("string"!=typeof r.paddingChar||r.paddingChar.length>1)throw new t.Errors.ArgumentError(String.format("Option 'paddingChar' with value '{0}' must be a single character string",r.paddingChar+""));if(null==o[r.direction])throw new t.Errors.ArgumentError(String.format("Option 'direction' with value '{0}' must be one of Padding.Direction enum values",r.direction+""))},a=function(t){return t>0&&t===t>>0},u=function(t,r){return r.totalWidth>t.length},c=function(t,r){return r.totalWidth-t.length},f=function(t,r){return new Array(t+1).join(r.paddingChar)},s={},s[o.Left]=function(t,r){return f(c(t,r),r)+t},s[o.Right]=function(t,r){return t+f(c(t,r),r)},s[o.Both]=function(t,r){var n=c(t,r),o=Math.ceil(n/2),e=n-o;return[f(e,r),t,f(o,r)].join("")}}(n=r.Padding||(r.Padding={}))}(r=t.Utils||(t.Utils={}))}(Format||(Format={})),function(t){var r;!function(r){var n;!function(r){function n(r,n){var o,e,i;if(null==r)throw new t.Errors.ArgumentNullError("array");if("function"!=typeof n)throw new TypeError("Cannot call method 'takeWhile' without a predicate function");for(o=[],e=0,i=r.length;i>e&&n(r[e],e);e+=1)o.push(r[e]);return o}r.takeWhile=n}(n=r.Enumerable||(r.Enumerable={}))}(r=t.Utils||(t.Utils={}))}(Format||(Format={})),function(t){var r;!function(t){var r=function(t){function r(r,n){t.prototype.incrementStackCount.call(this),t.call(this,r,n)}return __extends(r,t),r}(t.SystemError);t.FormatError=r}(r=t.Errors||(t.Errors={}))}(Format||(Format={})),function(t){function r(r,e,i){if(null==e)throw new t.Errors.ArgumentNullError("format");return r=r||h,e.replace(n,function(t,n,e,a){return o(r,i,{formatItem:t,indexComponent:n,alignmentComponent:e,formatStringComponent:a})})}var n,o,e,i,a,u,c,f,s,m,l,g,h;String.format=function(){var n,o,e,i=[];for(n=0;n<arguments.length;n++)i[n-0]=arguments[n];if("string"==typeof i[0])return r(void 0,i.shift(),i);if(o=i[0],o&&"function"!=typeof o.getFormatter)throw new t.Errors.ArgumentError(String.format("Argument 'provider' of type '{0}' does not implement the FormatProvider interface",t.Utils.Function.getName(o.constructor)));return e=i[1],i.splice(0,2),r(o,e,i)},t.innerFormat=r,n=/{+(\d+)(?:,(.+?))?(?::(.+?))?}+/g,o=function(r,n,o){var e,a=Math.floor(t.getBracesCount(o.formatItem,"{")/2);return i(o.formatItem)?o.formatItem.substring(a,o.formatItem.length-a):(e=u(r,n,o),void 0!==o.alignmentComponent&&(e=f(e,o)),a>0&&(e=s(e,a,"{"),e=s(e,a,"}")),e)},t.getBracesCount=function(r,n){var o=r.split(n);return"}"===n&&(o=o.reverse()),t.Utils.Enumerable.takeWhile(o,e).length},e=function(t){return!(t&&t.trim().length>0)},i=function(r){var n=t.getBracesCount(r,"{"),o=t.getBracesCount(r,"}");if(n!==o)throw new t.Errors.FormatError(String.format("Opening and closing brackets for item '{0}' do not match",r));return a(n)},a=function(t){return!(1&t)},u=function(r,n,o){var e,i,a=+o.indexComponent;if(a>=n.length)throw new t.Errors.FormatError("Index (zero based) must be strictly less than the size of the argument's array");e=n[a],i=t.Utils.getType(e);try{return r.getFormatter(i).format(o.formatStringComponent,e)}catch(u){throw new t.Errors.FormatError(String.format("Format string component '{0}' in format item '{1}' cannot be applied: {2}",o.formatStringComponent,o.formatItem,u.message),u)}},c=t.Utils.Padding.Direction,f=function(r,n){var o,e=+n.alignmentComponent;if(e!==e>>0)throw new t.Errors.FormatError(String.format("Alignment component '{0}' in format item '{1}' must be a finite integer value",n.alignmentComponent,n.formatItem));return o=0>e?c.Right:c.Left,e=Math.abs(e),t.Utils.Padding.pad(r,{totalWidth:e,direction:o})},s=function(r,n,o){var e="}"===o?c.Right:c.Left,i=r.length+n;return t.Utils.Padding.pad(r,{totalWidth:i,direction:e,paddingChar:o})},m=function(){function t(){this.objectFormatter=new l,this.toStringFormatter=new g}return t.prototype.getFormatter=function(t){return"[object Object]"===t||"[object Array]"===t?this.objectFormatter:this.toStringFormatter},t}(),l=function(){function r(){}return r.prototype.format=function(r,n){if(r)throw new t.Errors.FormatError("Values of type Object or Array do not accept a format string component");return n?JSON.stringify(n):""},r}(),g=function(){function r(){}return r.prototype.format=function(r,n){if(r)throw new t.Errors.FormatError(String.format("Formatter type '{0}' does not accept a format string component",t.Utils.Function.getName(this.constructor)));return null!=n?n+"":""},r}(),h=new m}(Format||(Format={}));