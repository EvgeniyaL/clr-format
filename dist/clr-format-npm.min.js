"use strict";var Format;!function(t){var r;!function(r){function n(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];var o=r[0];return o&&"function"==typeof o.getFormatter?(r.shift(),t.innerFormat(o,this,r)):t.innerFormat(void 0,this,r)}r.format=n}(r=t.Prototypes||(t.Prototypes={}))}(Format||(Format={}));var Format;!function(t){var r=function(){function r(){}return r.prototype.addFormatToPrototype=function(){return String.prototype.format=t.Prototypes.format,this},r.prototype.removeFormatFromPrototype=function(){return delete String.prototype.format,this},r}();t.Configuration=r,t.Config=new r}(Format||(Format={}));var Format;!function(t){var r;!function(t){var r;!function(t){function r(t){if("function"!=typeof t)throw new TypeError("Cannot call method 'getName' on non-functional objects");var r=o.exec(t.toString());return r&&r[1]?r[1]:"anonymous"}function n(){return e}t.getName=r;var o=/function +(\w+)/;t.getEmpty=n;var e=function(){return void 0}}(r=t.Function||(t.Function={}))}(r=t.Utils||(t.Utils={}))}(Format||(Format={}));var __extends=this&&this.__extends||function(t,r){function n(){this.constructor=t}for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);n.prototype=r.prototype,t.prototype=new n},Format;!function(t){var r;!function(r){t.Errors.ErrorClass=Error;var n=function(r){function n(n,o){r.call(this,n),this.message=n,this.innerError=o,this.name=t.Utils.Function.getName(this.constructor),this.stack=this.getStack(o),this.source=this.getActualSource(this.stack)}return __extends(n,r),n.prototype.incrementStackCount=function(){this.childStackCount=(this.childStackCount||0)+1},n.prototype.getStack=function(t){return t?t.stack:this.stack||this.getActualStack()},n.prototype.getActualSource=function(t){if(t){var r=t.split("\n");return r[this.getStackStart(r)].trim()}},n.prototype.getActualStack=function(){var t=this.getNativeStack();if(t){var r=t.split("\n");return r.splice(this.getStackStart(r),this.getStackCount()),r.join("\n")}},n.prototype.getNativeStack=function(){try{throw new Error}catch(t){return t.stack}},n.prototype.getStackStart=function(t){return"Error"===t[0]?1:0},n.prototype.getStackCount=function(){var t=4;return this.childStackCount?t+this.childStackCount:t},n}(r.ErrorClass);r.SystemError=n}(r=t.Errors||(t.Errors={}))}(Format||(Format={}));var Format;!function(t){var r;!function(t){var r=function(t){function r(r,n){t.prototype.incrementStackCount.call(this),t.call(this,r,n)}return __extends(r,t),r}(t.SystemError);t.ArgumentError=r}(r=t.Errors||(t.Errors={}))}(Format||(Format={}));var Format;!function(t){var r;!function(t){var r=function(t){function r(r){t.prototype.incrementStackCount.call(this),t.call(this,String.format("Argument '{0}' cannot be undefined or null",r))}return __extends(r,t),r}(t.ArgumentError);t.ArgumentNullError=r}(r=t.Errors||(t.Errors={}))}(Format||(Format={}));var Format;!function(t){var r;!function(r){var n;!function(r){r.takeWhile=function(r,n){if(null==r)throw new t.Errors.ArgumentNullError("array");if("function"!=typeof n)throw new TypeError("Cannot call method 'takeWhile' without a predicate function");for(var o=[],e=0,i=r.length;i>e&&n(r[e],e);e+=1)o.push(r[e]);return o}}(n=r.Enumerable||(r.Enumerable={}))}(r=t.Utils||(t.Utils={}))}(Format||(Format={}));var Format;!function(t){var r;!function(t){function r(t){return Object.prototype.toString.call(t)}function n(t,n){return r(n)===String.format("[object {0}]",t)}function o(t){return"[object Object]"===r(t)}t.getType=r,t.is=n,t.isObject=o}(r=t.Utils||(t.Utils={}))}(Format||(Format={}));var Format;!function(t){var r;!function(r){var n;!function(r){function n(r,n){if(null==r)throw new t.Errors.ArgumentNullError("value");return e(n),i(n),u(r,n)&&(r=f[n.direction](r,n)),r}!function(t){t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Both=3]="Both"}(r.Direction||(r.Direction={}));var o=r.Direction;r.pad=n;var e=function(t){t.direction=t.direction||o.Right,t.paddingChar=t.paddingChar||" "},i=function(r){if(!a(r.totalWidth))throw new t.Errors.ArgumentError(String.format("Option 'totalWidth' with value '{0}' must be a positive non-zero integer value",r.totalWidth+""));if(r.paddingChar.length>1)throw new t.Errors.ArgumentError(String.format("Option 'paddingChar' with value '{0}' must be a single character string",r.paddingChar+""));if(null==o[r.direction])throw new t.Errors.ArgumentError(String.format("Option 'direction' with value '{0}' must be one of Padding.Direction enum values",r.direction+""))},a=function(t){return t>0&&t===t>>0},u=function(t,r){return r.totalWidth>t.length},c=function(t,r){return r.totalWidth-t.length},m=function(t,r){return new Array(t+1).join(r.paddingChar)},f={};f[o.Left]=function(t,r){return m(c(t,r),r)+t},f[o.Right]=function(t,r){return t+m(c(t,r),r)},f[o.Both]=function(t,r){var n=c(t,r),o=Math.ceil(n/2),e=n-o;return[m(e,r),t,m(o,r)].join("")}}(n=r.Padding||(r.Padding={}))}(r=t.Utils||(t.Utils={}))}(Format||(Format={}));var Format;!function(t){var r;!function(t){var r=function(t){function r(r,n){t.prototype.incrementStackCount.call(this),t.call(this,r,n)}return __extends(r,t),r}(t.SystemError);t.FormatError=r}(r=t.Errors||(t.Errors={}))}(Format||(Format={}));var Format;!function(t){function r(r,e,i){if(null==e)throw new t.Errors.ArgumentNullError("format");return r=r||p,e.replace(n,function(t,n,e,a){return o(r,i,{formatItem:t,indexComponent:n,alignmentComponent:e,formatStringComponent:a})})}String.format=function(){for(var n=[],o=0;o<arguments.length;o++)n[o-0]=arguments[o];if("string"==typeof n[0])return r(void 0,n.shift(),n);var e=n[0];if(e&&"function"!=typeof e.getFormatter)throw new t.Errors.ArgumentError(String.format("Argument 'provider' of type '{0}' does not implement the FormatProvider interface",t.Utils.Function.getName(e.constructor)));var i=n[1];return n.splice(0,2),r(e,i,n)},t.innerFormat=r;var n=/{+(\d+)(?:,(.+?))?(?::(.+?))?}+/g,o=function(t,r,n){var o=Math.floor(e(n.formatItem,"{")/2);if(a(n.formatItem))return n.formatItem.substring(o,n.formatItem.length-o);var i=c(t,r,n);return void 0!==n.alignmentComponent&&(i=f(i,n)),o>0&&(i=s(i,o,"{"),i=s(i,o,"}")),i},e=function(r,n){var o=r.split(n);return"}"===n&&(o=o.reverse()),t.Utils.Enumerable.takeWhile(o,i).length},i=function(t){return!(t&&t.trim().length>0)},a=function(r){var n=e(r,"{"),o=e(r,"}");if(n!==o)throw new t.Errors.FormatError(String.format("Opening and closing brackets for item '{0}' do not match",r));return u(n)},u=function(t){return!(1&t)},c=function(r,n,o){var e=+o.indexComponent;if(e>=n.length)throw new t.Errors.FormatError("Index (zero based) must be strictly less than the size of the argument's array");var i=n[e],a=t.Utils.getType(i);try{return r.getFormatter(a).format(o.formatStringComponent,i)}catch(u){throw new t.Errors.FormatError(String.format("Format string component '{0}' in format item '{1}' cannot be applied: {2}",o.formatStringComponent,o.formatItem,u.message),u)}},m=t.Utils.Padding.Direction,f=function(r,n){var o=+n.alignmentComponent;if(o!==o>>0)throw new t.Errors.FormatError(String.format("Alignment component '{0}' in format item '{1}' must be a finite integer value",n.alignmentComponent,n.formatItem));var e=0>o?m.Right:m.Left;return o=Math.abs(o),t.Utils.Padding.pad(r,{totalWidth:o,direction:e})},s=function(r,n,o){var e="}"===o?m.Right:m.Left,i=r.length+n;return t.Utils.Padding.pad(r,{totalWidth:i,direction:e,paddingChar:o})},l=function(){function t(){this.objectFormatter=new h,this.otherFormatter=new g}return t.prototype.getFormatter=function(t){return"[object Object]"===t||"[object Array]"===t?this.objectFormatter:this.otherFormatter},t}(),h=function(){function r(){}return r.prototype.format=function(r,n){if(r)throw new t.Errors.FormatError("Values of type Object or Array do not accept a format string component");return n?JSON.stringify(n):""},r}(),g=function(){function r(){}return r.prototype.format=function(r,n){if(r)throw new t.Errors.FormatError(String.format("Formatter type '{0}' does not accept a format string component",t.Utils.Function.getName(this.constructor)));return null!=n?n+"":""},r}(),p=new l}(Format||(Format={})),module.exports=String.format;